matching filter:
{% set filterscope = area if area else house %}
{% set devclass = devclass if devclass else 'device' %}
{% macro decorate_active(name) %}
	{% if name in active_filters or (name == 'all' and active_filters == []) %}
		<b>{{ name }}</b>
	{% else %}
		<a href="{{ name }}">{{ name }}</a>
	{% endif %}
{% endmacro %}

{% set type_state_map = filterscope.get_device_type_state_map(devclass = devclass) %}
{% for type in type_state_map | order_device_states(devclass = devclass) %}
{% set states = type_state_map[type] | order_device_states(devclass = devclass) %}
	{{ decorate_active(type) }}

	{% if states|length %}({% endif %}
	{% for state in states %}
		{{ decorate_active(state) }}
	{% endfor %}
	{% if states|length %}){% endif %}
{% endfor %}
